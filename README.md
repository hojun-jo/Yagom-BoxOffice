# ğŸ¬ğŸ¿ë°•ìŠ¤ì˜¤í”¼ìŠ¤ğŸ¿ğŸ¬

> íŒ€ í”„ë¡œì íŠ¸ ê¸°ê°„ : 2023.07. ~ 2023.08.<br>ë¦¬íŒ©í† ë§ : 2023.12. ~

## ğŸ“– ëª©ì°¨
1. [ì†Œê°œ](#ì†Œê°œ)
2. [íŒ€ì›](#íŒ€ì›)
3. [íƒ€ì„ë¼ì¸](#íƒ€ì„ë¼ì¸)
4. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
5. [ì‹¤í–‰ í™”ë©´](#ì‹¤í–‰-í™”ë©´)
6. [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
7. [ì°¸ê³  ë§í¬](#ì°¸ê³ -ë§í¬)


<br>

## ì†Œê°œ

ì˜í™”ì§„í¥ìœ„ì›íšŒì˜ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ `open API`ë¥¼ ì‚¬ìš©í•´ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì •ë³´ë¥¼ ê°€ì ¸ì™€ `CollectionView`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ì˜í™”ì •ë³´ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.  
ìº˜ë¦°ë”ë¥¼ ì´ìš©í•´ íŠ¹ì • ë‚ ì§œì˜ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì •ë³´ë¥¼ ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ ë³´ì—¬ì¤„ ì§€ ì•„ì´ì½˜ í˜•íƒœë¡œ ë³´ì—¬ì¤„ ì§€ ë ˆì´ì•„ì›ƒì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ë‹¤ì´ë‚˜ë¯¹ íƒ€ì…ì´ ë³€ê²½ë˜ê±°ë‚˜ ë””ë°”ì´ìŠ¤ì˜ ë°©í–¥ì´ ë³€ê²½ë˜ë©´ ì˜í™”ì •ë³´ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ë ˆì´ì•„ì›ƒì´ ìë™ìœ¼ë¡œ ì¡°ì ˆë©ë‹ˆë‹¤.  
ë©”ì¸ í™”ë©´ì—ì„œ ì˜í™”ë¥¼ ì„ íƒí•˜ë©´ `Daum ì´ë¯¸ì§€ API`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜í™” í¬ìŠ¤í„°ì™€ í•¨ê»˜ ìƒì„¸ ì •ë³´ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.  

ì£¼ìš”ê°œë…: `CollectionView`, `Indicator`, `URLSession`, `async/await`, `Compositional Layout`, `Dynamic Type`, `Device Orientation`


<br>

## íŒ€ì›

| minsup | Etial Moon |
| :--------: | :--------: |
| <Img src = "https://avatars.githubusercontent.com/u/79740398?v=4" width="200"> |<Img src="https://avatars.githubusercontent.com/u/86751964?v=4" width="200" height="200"> |
|[Github](https://github.com/agilestarskim) |[Github](https://github.com/hojun-jo) |

<br>

## íƒ€ì„ë¼ì¸

|ë‚ ì§œ|ë‚´ìš©|
|:--:|--|
|2023.07.24| BoxOffice DTO ìƒì„± | 
|2023.07.25| NetworkManager ìƒì„± |
|2023.07.27| URLSessionì„ async/await ë°©ì‹ìœ¼ë¡œ ë³€ê²½ |
|2023.07.27| Movie DTO ìƒì„± |
|2023.07.31| NetworkManagerì™€ Decoderì˜ ì—­í•  ë¶„ë¦¬ |
|2023.07.31| CollectionView, Cell ìƒì„± ë° ë ˆì´ì•„ì›ƒ |
|2023.08.02| navi title, ì•…ì„¸ì‚¬ë¦¬, separator ìƒì„± |
|2023.08.02| AttributedStringì„ í†µí•´ ë°ì´í„°ë³„ String ë‹¤ë¥´ê²Œ ìƒì„± |
|2023.08.03| ë°ì´í„° ë¡œë”© ê°„ Indicator, RefreshControl ì¶”ê°€, ì—ëŸ¬ ì‹œ alert ìƒì„± |
|2023.08.08| FetchImageêµ¬í˜„, Detail í™”ë©´ êµ¬í˜„ |
|2023.08.09| APIKey ìˆ¨ê¸°ê¸°, Detail ë ˆì´ì•„ì›ƒ, Indicator ìƒì„± |
|2023.08.10| ì˜í™” í¬ìŠ¤í„° ì´ë¯¸ì§€ ë†’ì´ ì¡°ì ˆ|
|2023.08.15| CalendarViewController êµ¬í˜„ |
|2023.08.16| ì•„ì´ì½˜ ë ˆì´ì•„ì›ƒ ì¶”ê°€ ë° Orientation, DynamicType ëŒ€ì‘ |
|2023.08.18| ë¦¬íŒ©í† ë§ |



<br>

## í”„ë¡œì íŠ¸ êµ¬ì¡°

### í´ë” êµ¬ì¡°
    BoxOffice
    â”œâ”€â”€ Appication
    â”‚Â Â  â”œâ”€â”€ AppDelegate.swift
    â”‚Â Â  â””â”€â”€ SceneDelegate.swift
    â”œâ”€â”€ Controller
    â”‚Â Â  â”œâ”€â”€ BoxOfficeCalendarViewController.swift
    â”‚Â Â  â”œâ”€â”€ BoxOfficeMainViewController.swift
    â”‚Â Â  â”œâ”€â”€ MovieDetailViewController.swift
    â”‚Â Â  â””â”€â”€ Protocol
    â”‚Â Â      â””â”€â”€ BoxOfficeCalendarViewControllerDelegate.swift
    â”œâ”€â”€ Model
    â”‚Â Â  â”œâ”€â”€ AlertBuilder.swift
    â”‚Â Â  â”œâ”€â”€ Error
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DecodingError.swift
    â”‚Â Â  â”‚Â Â  â””â”€â”€ NetworkError.swift
    â”‚Â Â  â”œâ”€â”€ Extension
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Array+.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Bundle+.swift
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Date+.swift
    â”‚Â Â  â”‚Â Â  â””â”€â”€ String+.swift
    â”‚Â Â  â”œâ”€â”€ Network
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ API
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ BoxOffice
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ BoxOfficeAPI.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ DTO
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â      â”œâ”€â”€ BoxOffice.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â      â”œâ”€â”€ BoxOfficeItem.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â      â””â”€â”€ BoxOfficeResult.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DaumImage
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ DTO
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Image.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ ImageDocument.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ DaumImageAPI.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Interface
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ APIType.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â”œâ”€â”€ JustURL.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ MovieInformation
    â”‚Â Â  â”‚Â Â  â”‚Â Â      â”œâ”€â”€ DTO
    â”‚Â Â  â”‚Â Â  â”‚Â Â      â”‚Â Â  â”œâ”€â”€ Movie.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â      â”‚Â Â  â”œâ”€â”€ MovieInformation.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â      â”‚Â Â  â””â”€â”€ MovieResult.swift
    â”‚Â Â  â”‚Â Â  â”‚Â Â      â””â”€â”€ MovieInformationAPI.swift
    â”‚Â Â  â”‚Â Â  â””â”€â”€ NetworkManager.swift
    â”‚Â Â  â””â”€â”€ RankChangeState.swift
    â”œâ”€â”€ Resource
    â”‚Â Â  â”œâ”€â”€ APIKey.plist
    â”‚Â Â  â”œâ”€â”€ Assets.xcassets
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AccentColor.colorset
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ Contents.json
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ AppIcon.appiconset
    â”‚Â Â  â”‚Â Â  â”‚Â Â  â””â”€â”€ Contents.json
    â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Contents.json
    â”‚Â Â  â”‚Â Â  â””â”€â”€ boxOfficeTestSample.dataset
    â”‚Â Â  â”‚Â Â      â”œâ”€â”€ Contents.json
    â”‚Â Â  â”‚Â Â      â””â”€â”€ boxOfficeTestSample.json
    â”‚Â Â  â”œâ”€â”€ Base.lproj
    â”‚Â Â  â”‚Â Â  â””â”€â”€ LaunchScreen.storyboard
    â”‚Â Â  â””â”€â”€ Info.plist
    â””â”€â”€ View
        â”œâ”€â”€ BoxOfficeCollectionViewIconCell.swift
        â”œâ”€â”€ BoxOfficeCollectionViewListCell.swift
        â”œâ”€â”€ BoxOfficeMainView.swift
        â”œâ”€â”€ Extension
        â”‚Â Â  â”œâ”€â”€ UICollectionView+.swift
        â”‚Â Â  â”œâ”€â”€ UICollectionViewCell+.swift
        â”‚Â Â  â”œâ”€â”€ UIFont+.swift
        â”‚Â Â  â””â”€â”€ UILabel+.swift
        â”œâ”€â”€ MovieDetailView.swift
        â””â”€â”€ Protocol
            â””â”€â”€ Reusable.swift

<br>

### ë‹¤ì´ì–´ê·¸ë¨
<img width="2752" alt="boxoffice" src="https://github.com/hojun-jo/Yagom-BoxOffice/assets/86751964/3c56fc4a-283d-4913-b234-b1092daa2c40">

<br>
<br>

## ì‹¤í–‰ í™”ë©´

|ë‹¹ê²¨ì„œ ìƒˆë¡œê³ ì¹¨|ë„¤íŠ¸ì›Œí¬ í†µì‹  ì¤‘ ë¡œë”©UI í‘œì‹œ|
|:---:|:---:|
|<img src="https://github.com/hojun-jo/Yagom-BoxOffice/assets/86751964/9abfbe6e-14c5-431b-a9cb-f16ccb1477be" width="300">|<img src="https://github.com/hojun-jo/Yagom-BoxOffice/assets/86751964/e1b20079-99cb-407c-a9fa-f9aa1078c4b0" width="300">|

|ì˜í™” ìƒì„¸ ì •ë³´ í™”ë©´|ë‚ ì§œ ì„ íƒ|
|:---:|:---:|
|<img src="https://github.com/hojun-jo/Yagom-BoxOffice/assets/86751964/2209e40e-30c3-46a9-a1eb-adfe41f68809" width="300">|<img src="https://github.com/hojun-jo/Yagom-BoxOffice/assets/86751964/f8aff43c-9680-4dc5-a05e-b039df11456a" width="300">|

|í™”ë©´ ëª¨ë“œ ë³€ê²½|ì•„ì´ì½˜ í™”ë©´ íšŒì „|
|:---:|:---:|
|<img src="https://github.com/hojun-jo/Yagom-BoxOffice/assets/86751964/a5705666-7af3-40af-b414-23d8a977332d" width="300">|<img src="https://github.com/hojun-jo/Yagom-BoxOffice/assets/86751964/b06d184c-8902-40fe-a631-3a636b7f3bc1" width="300">|

|ë¦¬ìŠ¤íŠ¸ í™”ë©´ ë‹¤ì´ë‚˜ë¯¹ íƒ€ì…|ì•„ì´ì½˜ í™”ë©´ ë‹¤ì´ë‚˜ë¯¹ íƒ€ì…|
|:---:|:---:|
|<img src="https://github.com/hojun-jo/Yagom-BoxOffice/assets/86751964/aef68d4d-111c-446e-932e-3e2d107e4fc2" width="300">|<img src="https://github.com/hojun-jo/Yagom-BoxOffice/assets/86751964/730891e2-5b9d-4f81-bc2c-2d0603a2046f" width="300">|


<br>

## íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
### 1ï¸âƒ£ Completion Handlerì—ì„œ async/awaitìœ¼ë¡œ

#### ğŸ”’ ë¬¸ì œì 

URLSession.shared.dataTask() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê²°ê³¼ë¥¼ completion Handlerë¥¼ í†µí•´ ê²°ê³¼ë¥¼ ë°›ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì €í¬ëŠ” ê²°ê³¼ë¡œ ë°›ì€ ë°ì´í„°ë¥¼ ë¦¬í„´í•˜ê³  ì‹¶ì—ˆìŠµë‹ˆë‹¤.
```swift
func getBoxOffice() -> BoxOffice {
    let task = URLSession.shared.dataTask(from: url) { data, response, error in 
    //ìƒëµ...
        return data //compile error
    }
    task.resume()
}
```

`return data`ëŠ” dataTaskê°€ ë°›ëŠ” í´ë¡œì €ì˜ returnìœ¼ë¡œ ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì— ì»´íŒŒì¼ì—ëŸ¬ê°€ ìƒê¹ë‹ˆë‹¤.
ë”°ë¼ì„œ dataë¥¼ ë¦¬í„´í•˜ê³  ì‹¶ìœ¼ë©´ ë˜ completion Handlerë¥¼ ë°›ì•„ ì „ë‹¬í•´ì•¼í•©ë‹ˆë‹¤.

```swift
func getBoxOffice(completion: (BoxOffice) -> Void) {
    let task = URLSession.shared.dataTask(from: url) { data, response, error in 
        completion(data)
    }
    task.resume()
}
```

ê·¸ëŸ¬ë©´ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ ë˜ completion ì„ ì „ë‹¬í•´ì•¼í•©ë‹ˆë‹¤.
```swift
getBoxOffice { boxOffice in 
    print(boxoffice)
}
```

í•˜ì§€ë§Œ ì €í¬ê°€ ì›í•˜ëŠ” ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
```swift
let boxOffice = getBoxOffice()
```

#### ğŸ”‘ í•´ê²° ë°©ë²•
ì›í•˜ëŠ” ë°©ì‹ì„ ê³ ë¯¼í•˜ë˜ ì¤‘ async awaitì„ ì•Œê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
async awaitì€ ìœ„ì™€ ê°™ì€ ë¬¸ì œ ë¿ë§Œ ì•„ë‹ˆë¼ URLSessionì˜ ì“°ë ˆë“œ ë¬¸ì œ, ë²„ê·¸ë°œìƒì´ ì‰¬ìš´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```swift
static func fetchData<T: APIType>(api: T) async throws -> Data {
    let request = try createRequest(api: api)
    
    guard let (data, response) = try? await URLSession.shared.data(for: request) else {
        throw NetworkError.requestFailed
    }
    
    guard let httpResponse = response as? HTTPURLResponse else {
        throw NetworkError.invalidHTTPResponse
    }
    
    guard (200..<300) ~= httpResponse.statusCode else {
        throw NetworkError.badStatusCode(statusCode: httpResponse.statusCode)
    }
    
    return data
}
```

async await ë•ë¶„ì— ë„¤íŠ¸ì›Œí¬ í†µì‹  í•¨ìˆ˜ë¥¼ ê¹”ë”í•˜ê²Œ ì •ë¦¬í•  ìˆ˜ ìˆì—ˆê³  ì›í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë¦¬í„´ê°’ì„ ë°›ì„ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.


### 2ï¸âƒ£ separator

#### ğŸ”’ ë¬¸ì œì 

ìš”êµ¬ì‚¬í•­ í™”ë©´ì— separatorê°€ ìˆëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.
collectionViewë¥¼ compositionalLayoutìœ¼ë¡œ êµ¬í˜„í–ˆë”ë‹ˆ ìë™ìœ¼ë¡œ separatorê°€ ë§Œë“¤ì–´ì§€ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
ì²˜ìŒì—ëŠ” ì…€ì— borderë¥¼ ì£¼ì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ borderë¥¼ ì£¼ëŠ” ë°©ë²• ë§ê³  ë‹¤ë¥¸ ë°©ë²•ì´ ìˆì–´ì„œ ì°¾ì•„ë³´ì•˜ìŠµë‹ˆë‹¤.

#### ğŸ”‘ í•´ê²° ë°©ë²•

compositionalLayoutì— static methodì¸ .list()ë¥¼ ì‚¬ìš©í•˜ë©´ list configurationì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ ì´ìš©í•´ list ëª¨ì–‘ í˜•ì‹ì„ ê·¸ëŒ€ë¡œ collectionViewì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
```swift
let config = UICollectionLayoutListConfiguration(appearance: .plain)
let layout = UICollectionViewCompositionalLayout.list(using: config)
        
collectionView.collectionViewLayout = layout
```

í•˜ì§€ë§Œ ë¬¸ì œëŠ” compositionalLayoutìœ¼ë¡œ itemê³¼ section groupì„ ì„¤ì •í–ˆì„ ê²½ìš° listConfigurationì„ ì‚¬ìš©í•˜ì§€ ëª»í•œë‹¤ëŠ” í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤. ì´ë•ŒëŠ” cellì— borderë¥¼ ì£¼ëŠ” ê²ƒì´ ì¢‹ì€ ë°©ë²•ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.

### 3ï¸âƒ£ separator ê¸°ë³¸ ê³µë°±

#### ğŸ”’ ë¬¸ì œì 

![](https://hackmd.io/_uploads/H1g1qfYo3.png)

ê° cellì— separatorë¥¼ ì„¤ì •í•˜ì˜€ì§€ë§Œ ìœ„ì— ì‚¬ì§„ê³¼ ê°™ì´ ì•½ê°„ì˜ ê³µë°±ì´ ìƒê¸°ëŠ” ë¬¸ì œê°€ ìƒê²¼ìŠµë‹ˆë‹¤.

#### ğŸ”‘ í•´ê²° ë°©ë²•

ê·¸ ì´ìœ ëŠ” ì»¨í…ì¸ ì˜ ëì— ìë™ìœ¼ë¡œ ì¤„ ë§ì¶¤ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì…€ì„ ë§Œë“¤ ë•Œ UICollectionViewCellì´ ì•„ë‹Œ UICollectionViewListCellì„ ìƒì†ë°›ìœ¼ë©´ separatorì˜ ë ˆì´ì•„ì›ƒì„ ì¡ì„ ìˆ˜ ìˆëŠ” layoutGuideë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤. (disclosure accesaryë„ ì‚¬ìš©ê°€ëŠ¥)

ì´ ì†ì„±ì€ ë ˆì´ì•„ì›ƒì„ .list()ë¡œ ë§Œë“  ë ˆì´ì•„ì›ƒì—ì„œë§Œ ì ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.


```swift
separatorLayoutGuide.leadingAnchor.constraint(equalTo: leadingAnchor).isActive = true
```

### 4ï¸âƒ£ API key êµ¬ë¶„ ë° ì€ë‹‰

#### ğŸ”’ ë¬¸ì œì 
ë„¤íŠ¸ì›Œí¬ ë§¤ë‹ˆì €ì—ì„œ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì •ë³´ë§Œ ë¶ˆëŸ¬ì˜¬ ë•ŒëŠ” API keyë¥¼ URLì— í¬í•¨í•˜ì—¬ URLë§Œ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì˜í™” í¬ìŠ¤í„° ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ í•„ìš”í•œ URL í˜•ì‹ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— APIë³„ë¡œ ë¶„ë¦¬ê°€ í•„ìš”í–ˆìŠµë‹ˆë‹¤.
| ì˜í™”ì§„í¥ìœ„ì›íšŒ | ë‹¤ìŒ ì´ë¯¸ì§€ ê²€ìƒ‰ |
|:-:|:-:|
|API keyê°€ URL ì¿¼ë¦¬ì— í¬í•¨|API keyê°€ í—¤ë”ì— í¬í•¨|

#### ğŸ”‘ í•´ê²° ë°©ë²•
URLRequestë¥¼ ë§Œë“œëŠ” ë©”ì†Œë“œë¥¼ ë¶„ë¦¬í•˜ë©° URLQueryItemê³¼ í—¤ë”ë¥¼ ë§Œë“¤ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
```swift
static private func createRequest(fetchType: FetchType) -> URLRequest? {
    guard var urlComponents = URLComponents(string: fetchType.url) else {
        return nil
    }
    
    switch fetchType {
    case .boxOffice(let date):
        urlComponents.queryItems = [
            URLQueryItem(name: "key", value: Bundle.main.kobisAPIKey),
            URLQueryItem(name: "targetDt", value: date)
        ]
        
        guard let url = urlComponents.url else {
            return nil
        }
        
        return URLRequest(url: url)
        ...
    }
}
```
ì•„ìš¸ëŸ¬ API keyë¥¼ ìˆ¨ê¸°ê¸° ìœ„í•´ plistì— í‚¤ë¥¼ ì €ì¥í•˜ê³  gitignoreë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.
```swift
extension Bundle {
    var kakaoAPIKey: String {
        return fetchPropertyList(domain: "KAKAO")
    }
    
    var kobisAPIKey: String {
        return fetchPropertyList(domain: "KOBIS")
    }
    
    private func fetchPropertyList(domain: String) -> String {
        guard let file = self.path(forResource: "APIKey", ofType: "plist") else { return "" }
        
        guard let resource = NSDictionary(contentsOfFile: file) else { return "" }
        guard let key = resource[domain] as? String else { fatalError("APIKey.plistì— \(domain) APIí‚¤ë¥¼ ë“±ë¡í•˜ì„¸ìš”")}
        
        return key
    }
}
```

### 5ï¸âƒ£ ì´ë¯¸ì§€ì˜ ë¶ˆí•„ìš”í•œ ê³µë°±

#### ğŸ”’ ë¬¸ì œì 
ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì™”ì„ ë•Œ ì´ë¯¸ì§€ í¬ê¸°ì™€ ë‹¤ë¥´ê²Œ ê³µë°±ì´ ìƒê¸°ëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

<img src="https://hackmd.io/_uploads/ByRPbKgnn.png" width=300>

#### ğŸ”‘ í•´ê²° ë°©ë²•
ì´ë¯¸ì§€ ë·°ì˜ ê°€ë¡œì™€ ì›ë³¸ ì´ë¯¸ì§€ì˜ ê°€ë¡œë¥¼ í†µí•´ ë¹„ìœ¨ì„ êµ¬í•œ í›„, ì´ ë¹„ìœ¨ì„ í†µí•´ ë†’ì´ë¥¼ êµ¬í•˜ì—¬ ì´ë¯¸ì§€ ë·°ì˜ ë†’ì´ë¥¼ ê³ ì •í–ˆìŠµë‹ˆë‹¤.

```swift
func injectMovieInformation(_ movieInformation: MovieInformation?, image: UIImage?) {
    posterImageView.image = image
    updatePosterImageViewConstraints()
   ...
}

private func updatePosterImageViewConstraints() {
    guard let imageWidth = posterImageView.image?.size.width,
          let imageHeight = posterImageView.image?.size.height else { return }
    let ratio = posterImageView.frame.width / imageWidth
    let height = ratio * imageHeight
    posterImageView.heightAnchor.constraint(equalToConstant: height).isActive = true
}
```

### 6ï¸âƒ£ async letì„ ì´ìš©í•œ ë¹„ë™ê¸° ì‘ì—…

#### ğŸ”’ ë¬¸ì œì 
í˜„ì¬ ì½”ë“œì—ì„  ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ async/awaitì„ ì‚¬ìš©ì¤‘ì…ë‹ˆë‹¤.

```swift
let movie = await fetchMovie()
let poster = await fetchPoster()
detailView.injectMovieInformation(movie, poster)
```

í•´ë‹¹ ì½”ë“œëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ê¸° ë•Œë¬¸ì— movieì˜ ê°’ì„ ë°›ì„ ë•Œ ê¹Œì§€ ê¸°ë‹¤ë¦° í›„ movie ë°ì´í„°ë¥¼ ë‹¤ ë°›ìœ¼ë©´ posterë¥¼ ë°›ê¸° ì‹œì‘í•©ë‹ˆë‹¤.

ë‘ ê°œëŠ” ì„œë¡œ ì „í˜€ ê´€ê³„ê°€ ì—†ê³  ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì´ê¸° ë•Œë¬¸ì— ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰í•˜ë©° ê¸°ë‹¤ë¦¬ëŠ” ê²ƒì€ ì†í•´ë¼ê³  íŒë‹¨í•˜ì˜€ìŠµë‹ˆë‹¤.

#### ğŸ”‘ í•´ê²° ë°©ë²•
 async letì„ ì´ìš©í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.
```swift
async let movie = fetchMovie()
async let poster = fetchPoster()

detailView.injectMovieInformation(await movie, await poster)
```

async letì„ ì‚¬ìš©í•´ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ movieì™€ posterë¥¼ fetchí•  ìˆ˜ ìˆë‹¤ëŠ” ì‚¬ì‹¤ì„ ë°°ì› ìŠµë‹ˆë‹¤. 


<br>

## ì°¸ê³  ë§í¬
[ğŸApple Docs: UICollectionView](https://developer.apple.com/documentation/uikit/uicollectionview)  
[ğŸApple Docs: URLSession](https://developer.apple.com/documentation/foundation/urlsession)  
[ğŸApple Docs: Fetching Website Data into Memory](https://developer.apple.com/documentation/foundation/url_loading_system/fetching_website_data_into_memory)  
[ğŸApple Docs: UIRefreshControl](https://developer.apple.com/documentation/uikit/uirefreshcontrol)  
[ğŸApple Docs: UIActivityIndicatorView](https://developer.apple.com/documentation/uikit/uiactivityindicatorview)  
[ğŸApple Docs: UICalendarView](https://developer.apple.com/documentation/uikit/uicalendarview)  
[ğŸ“¼Apple WWDC: Meet async/await in Swift](https://developer.apple.com/videos/play/wwdc2021/10132/)  
[ğŸ“¼Apple WWDC: Use async/await with URLSession](https://developer.apple.com/videos/play/wwdc2021/10095/)  
[ğŸ“˜blog: [Swift] Actor ë¿Œì‹œê¸°](https://sujinnaljin.medium.com/swift-actor-%EB%BF%8C%EC%8B%9C%EA%B8%B0-249aee2b732d)  
[ğŸ“—ì•¼ê³°ë‹·ë„·: Swift Concurrency Programming](https://yagom.net/courses/swift-concurrency-programming/)  
